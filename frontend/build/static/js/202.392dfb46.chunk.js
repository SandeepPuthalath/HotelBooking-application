"use strict";(self.webpackChunkclient2=self.webpackChunkclient2||[]).push([[202],{52770:function(e,r,n){n.r(r),n.d(r,{default:function(){return C}});var a=n(1413),s=n(29439),t=n(79139),i=n(72791),l=n(56355),o=n(59434),d=n(1776),c=n(44925),u=["title","titleId"];var h=i.forwardRef((function(e,r){var n=e.title,a=e.titleId,s=(0,c.Z)(e,u);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":a},s),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"}))})),m=n(11087),p=n(23197),x=n(80184);function v(e){var r=e.photos,n=e._id,a=e.title,s=e.type,i=e.desc;return(0,x.jsxs)(t.Card,{className:"flex-row w-full max-w-[68rem]",children:[(0,x.jsx)(t.CardHeader,{shadow:!1,floated:!1,className:"w-2/5 shrink-0 m-0 rounded-r-none",children:(0,x.jsx)("img",{src:"https://res.cloudinary.com/".concat(p.Zm,"/image/upload/v1689876154/BookIt_uploades/").concat(r[0],".jpg"),alt:"",className:"w-full h-full object-cover"})}),(0,x.jsxs)(t.CardBody,{children:[(0,x.jsx)(t.Typography,{variant:"h6",color:"blue",className:"uppercase mb-4",children:s}),(0,x.jsx)(t.Typography,{variant:"h4",color:"blue-gray",className:"mb-2",children:a}),(0,x.jsx)(t.Typography,{color:"gray",className:"font-normal mb-8",children:i}),(0,x.jsx)(m.OL,{to:"/owner/room/"+n,className:"inline-block",children:(0,x.jsxs)(t.Button,{variant:"text",className:"flex items-center gap-2",children:["View",(0,x.jsx)(h,{strokeWidth:2,className:"w-4 h-4"})]})})]})]})}var f=n(74165),j=n(15861),g=n(55705),y=n(8007),N=n(34279),w=n(9085),b=y.Ry().shape({title:y.Z_().required("Title is required"),price:y.Rx().required("Price is required"),maxPeople:y.Rx().required("Max people is required"),desc:y.Z_().required("Description is required"),photos:y.Z_().required("Photos are required")});function Z(e){var r=e.hotelId,n=e.open,l=e.onClose,c=(0,o.I0)(),u=(0,i.useState)(""),h=(0,s.Z)(u,2),m=h[0],v=h[1],y=(0,i.useRef)(null),Z=function(){var e=(0,j.Z)((0,f.Z)().mark((function e(r){var n,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.target.files[0],(a=new FormData).append("file",n),a.append("upload_preset",p.d3),fetch("https://api.cloudinary.com/v1_1/".concat(p.Zm,"/upload"),{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){v(e.secure_url);var r=(0,N.separatePhotoId)(e.secure_url);k.setFieldValue("photos",r)})).catch((function(e){console.error("Error uploading image:",e)}));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),k=(0,g.TA)({initialValues:{title:"",price:"",maxPeople:"",desc:"",photos:""},validationSchema:b,onSubmit:function(e,n){n.setSubmitting,n.setErrors;try{c((0,d.Cu)({hotelId:r,roomData:e})),w.Am.success("Room added successfull"),window.location.reload()}catch(a){w.Am.error("Somthing went wrong")}}});return(0,x.jsx)(i.Fragment,{children:(0,x.jsxs)(t.Dialog,{open:n,size:"xxl",handler:l,children:[(0,x.jsx)(t.DialogHeader,{children:"Add New Room"}),(0,x.jsx)(t.DialogBody,{className:"h-full",divider:!0,children:(0,x.jsxs)("div",{className:"flex justify-center items-center",children:[(0,x.jsxs)("div",{className:"w-full flex flex-col justify-center items-center",children:[(0,x.jsx)(t.Card,{className:"h-64 w-96 cursor-pointer overflow-hidden transition-opacity hover:opacity-90",children:(0,x.jsx)("img",{alt:"nature",className:"h-full w-full object-cover object-center",src:m||"/defaults/default-image.jpg"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"hidden",children:(0,x.jsx)("input",{onChange:Z,ref:y,id:"file-upload",type:"file",name:"image",variant:"static",label:"Max people"})}),(0,x.jsx)("div",{className:"my-5",children:(0,x.jsx)(t.Button,{onClick:function(){y.current.click()},children:"upload"})})]})]}),(0,x.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,x.jsxs)("div",{className:"flex flex-col w-72 gap-2",children:[(0,x.jsx)(t.Input,(0,a.Z)((0,a.Z)({},k.getFieldProps("title")),{},{error:k.touched.title&&Boolean(k.errors.title),variant:"standard",label:"Title"})),k.touched.title&&k.errors.title&&(0,x.jsx)(t.Typography,{variant:"small",color:"red",children:k.errors.title}),(0,x.jsx)(t.Input,(0,a.Z)((0,a.Z)({},k.getFieldProps("price")),{},{error:k.touched.price&&Boolean(k.errors.price),variant:"standard",label:"Price"})),k.touched.price&&k.errors.price&&(0,x.jsx)(t.Typography,{variant:"small",color:"red",children:k.errors.price}),(0,x.jsx)(t.Input,(0,a.Z)((0,a.Z)({},k.getFieldProps("maxPeople")),{},{error:k.touched.maxPeople&&Boolean(k.errors.maxPeople),variant:"standard",label:"Max people"})),k.touched.maxPeople&&k.errors.maxPeople&&(0,x.jsx)(t.Typography,{variant:"small",color:"red",children:k.errors.maxPeople}),(0,x.jsx)(t.Textarea,(0,a.Z)((0,a.Z)({},k.getFieldProps("desc")),{},{error:k.touched.desc&&Boolean(k.errors.desc),variant:"standard",label:"description"})),k.touched.desc&&k.errors.desc&&(0,x.jsx)(t.Typography,{variant:"small",color:"red",children:k.errors.desc}),(0,x.jsx)(t.Input,(0,a.Z)((0,a.Z)({className:"hidden"},k.getFieldProps("photos")),{},{error:k.touched.photos&&Boolean(k.errors.photos),variant:"standard"})),k.touched.photos&&k.errors.photos&&(0,x.jsx)(t.Typography,{className:"hidden",variant:"small",color:"red",children:k.errors.photos})]})})]})}),(0,x.jsxs)(t.DialogFooter,{children:[(0,x.jsx)(t.Button,{variant:"text",color:"red",onClick:l,className:"mr-1",children:(0,x.jsx)("span",{children:"Cancel"})}),(0,x.jsx)(t.Button,{variant:"gradient",color:"green",onClick:k.handleSubmit,children:(0,x.jsx)("span",{children:"Submit"})})]})]})})}var k=n(27319),C=function(e){var r=e.hotelId,n=(0,o.I0)(),c=(0,o.v9)((function(e){var r;return null===(r=e.rooms)||void 0===r?void 0:r.loading})),u=(0,o.v9)((function(e){var r;return null===(r=e.rooms)||void 0===r?void 0:r.data})),h=((0,o.v9)((function(e){var r;return null===(r=e.rooms)||void 0===r?void 0:r.error})),i.useState([])),m=(0,s.Z)(h,2),p=m[0],f=m[1],j=i.useState(!1),g=(0,s.Z)(j,2),y=g[0],N=g[1];i.useEffect((function(){n((0,d.lM)(r)),f(u)}),[n]);var w=function(){return N((function(e){return!e}))};return c?(0,x.jsx)(k.Z,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex flex-col justify-center items-center ",children:[(0,x.jsxs)("div",{className:"w-full shadow-md",children:[(0,x.jsx)("div",{className:"flex items-center justify-center py-5",children:(0,x.jsx)(t.Typography,{variant:"h3",children:"Available Rooms"})}),(0,x.jsxs)("div",{className:"w-full flex justify-between items-center ",children:[" ",(0,x.jsx)("div",{className:"w-72 py-10 pl-10",children:(0,x.jsx)(t.Input,{onChange:function(e){var r=function(e,r){return r.filter((function(r){return null===r||void 0===r?void 0:r.title.toLowerCase().includes(e.toLowerCase())}))}(e.target.value,u);f(r)},label:"Search",icon:(0,x.jsx)(l.U41,{})})}),(0,x.jsx)(t.Button,{onClick:w,className:"my-10 mr-10",children:"Add Room"})]})]}),(0,x.jsx)("div",{className:"flex flex-col gap-4 my-10",children:null===p||void 0===p?void 0:p.map((function(e){return(0,x.jsx)(v,(0,a.Z)({},e),null===e||void 0===e?void 0:e._id)}))})]}),(0,x.jsx)(Z,{hotelId:r,open:y,onClose:w})]})}},34279:function(e,r,n){n.r(r),n.d(r,{default:function(){return w},separatePhotoId:function(){return y}});var a=n(1413),s=n(29439),t=n(44925),i=n(72791),l=["title","titleId"];var o=i.forwardRef((function(e,r){var n=e.title,a=e.titleId,s=(0,t.Z)(e,l);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":a},s),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"}))})),d=n(79139),c=n(55705),u=n(8007),h=n(59434),m=n(3643),p=n(56355),x=(n(52770),n(57689)),v=n(12406),f=n(27319),j=n(80184),g="da88acifi",y=function(e){var r=e.split("/");return r[r.length-1].replace(".jpg","")},N=u.Ry().shape({name:u.Z_().required("Hotel Name is required"),address:u.Z_().required("Address is required"),destination:u.Z_().required("Destination is required"),distance:u.Z_().required("Distance is required"),desc:u.Z_().required("Description is required"),cheapestPrice:u.Rx().required("Cheapest Price is required"),photos:u.Z_()}),w=function(){var e=(0,h.v9)((function(e){var r;return null===(r=e.myHotel)||void 0===r?void 0:r.loading})),r=((0,h.v9)((function(e){var r;return null===(r=e.myHotel)||void 0===r?void 0:r.error})),(0,h.v9)((function(e){var r;return null===(r=e.myHotel)||void 0===r?void 0:r.data}))),n=(0,h.v9)((function(e){var r,n;return null===(r=e.user)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.applicantId})),t=(0,h.v9)((function(e){var r;return null===(r=e.allDestinations)||void 0===r?void 0:r.data})),l=(0,h.I0)(),u=(0,i.useState)(""),w=(0,s.Z)(u,2),b=w[0],Z=w[1],k=(0,i.useState)(""),C=(0,s.Z)(k,2),I=C[0],B=C[1],P=(0,i.useRef)(null);(0,i.useEffect)((function(){return l((0,m.l8)(n)),function(){return l((0,m.jM)())}}),[l]);var T=function(){P.current.click()};return e?(0,j.jsx)(f.Z,{}):(0,j.jsx)(j.Fragment,{children:r?(0,j.jsxs)("div",{className:"w-full relative",children:[(0,j.jsxs)("figure",{className:"relative h-80 w-full",children:[(0,j.jsx)("img",{className:"h-full w-full",src:"https://res.cloudinary.com/".concat(g,"/image/upload/v1689876154/BookIt_uploades/").concat(null===r||void 0===r?void 0:r.photos[0],".jpg"),alt:""}),(0,j.jsxs)("figcaption",{className:"absolute bottom-8 left-2/4 flex w-[calc(100%-4rem)] -translate-x-2/4 justify-between rounded-xl border border-white bg-white/75 py-4 px-6 shadow-lg shadow-black/5 saturate-200 backdrop-blur-sm",children:[(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(p.X2f,{fontSize:30}),(0,j.jsx)(d.Typography,{variant:"h4",children:null===r||void 0===r?void 0:r.name})]}),(0,j.jsx)("div",{className:"flex items-center",children:(0,j.jsx)(d.Typography,{children:null===r||void 0===r?void 0:r.address})}),(0,j.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,j.jsxs)(d.Typography,{children:["Type: ",null===r||void 0===r?void 0:r.type]}),(0,j.jsxs)(d.Typography,{children:["Distance :",null===r||void 0===r?void 0:r.distance]})]}),(0,j.jsxs)("div",{className:"flex items-center",children:[(0,j.jsx)(d.Typography,{children:"Rating: "}),(0,j.jsx)(d.Rating,{value:null===r||void 0===r?void 0:r.Rating,readonly:!0})]})]}),(0,j.jsx)("div",{className:"flex w-1/2",children:(0,j.jsx)(d.Typography,{variant:"paragraph",children:null===r||void 0===r?void 0:r.desc.substring(0,150)})})]})]}),(0,j.jsx)(v.Z,{fallback:(0,j.jsx)("h1",{children:"somthing went wrong"}),children:(0,j.jsx)(x.j3,{})})]}):(0,j.jsx)("div",{className:"min-h-screen my-20 p-10",children:(0,j.jsx)(d.Card,{children:(0,j.jsxs)(d.CardBody,{children:[(0,j.jsx)(d.Typography,{variant:"h3",className:"m-2",children:"My Hotel"}),(0,j.jsxs)("div",{className:"flex justify-between items-center",children:[(0,j.jsxs)("div",{className:"w-1/2",children:[(0,j.jsx)("img",{className:"h-96 w-full object-contain",onClick:T,src:b||"/defaults/default-image.jpg",alt:"img-blur-shadow"}),(0,j.jsx)("div",{className:"flex justify-center items-center",children:(0,j.jsxs)(d.Button,{onClick:T,variant:"gradient",className:"flex items-center m-2 gap-3",children:[(0,j.jsx)(o,{strokeWidth:2,className:"h-5 w-5"})," ","Upload Files"]})}),(0,j.jsx)("input",{ref:P,type:"file",onChange:function(e){var r=e.target.files[0],n=new FormData;n.append("file",r),n.append("upload_preset","BookIt_uploades"),fetch("https://api.cloudinary.com/v1_1/".concat(g,"/upload"),{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){Z(e.secure_url);var r=y(e.secure_url);B(r)})).catch((function(e){console.error("Error uploading image:",e)}))},className:"hidden",name:"image",id:"file-input"})]}),(0,j.jsx)("div",{className:"w-1/2 flex justify-center items-center",children:(0,j.jsxs)("div",{className:"flex flex-col w-72",children:[(0,j.jsxs)("div",{className:"ml-2",children:[(0,j.jsx)(d.Typography,{variant:"h4",children:"Hotel Details"})," "]}),(0,j.jsx)(c.J9,{initialValues:{name:"",address:"",destination:"",distance:"",desc:"",cheapestPrice:"",photos:""},validationSchema:N,onSubmit:function(e,r){var a=r.resetForm;e.photos=I,console.log(e);var s={userId:n,hotel:e};l((0,m.fA)(s)),a()},children:(0,j.jsxs)(c.l0,{children:[(0,j.jsx)("div",{className:"m-3",children:(0,j.jsx)(c.gN,{name:"name",children:function(e){var r=e.field;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.Input,(0,a.Z)({variant:"standard",label:"Hotel Name"},r)),(0,j.jsx)(c.Bc,{name:"name",component:"div",className:"text-red-500"})]})}})}),(0,j.jsx)("div",{className:"m-3",children:(0,j.jsx)(c.gN,{name:"destination",children:function(e){var r=e.field;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("label",{htmlFor:"type",children:"Destination"}),(0,j.jsxs)("select",(0,a.Z)((0,a.Z)({},r),{},{id:"destination",className:"w-full p-2 border",children:[(0,j.jsx)("option",{value:"",children:"Select a type"}),t.map((function(e){return(0,j.jsx)("option",{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)}))]})),(0,j.jsx)(c.Bc,{name:"destination",component:"div",className:"text-red-500"})]})}})}),(0,j.jsx)("div",{className:"m-3",children:(0,j.jsx)(c.gN,{name:"address",children:function(e){var r=e.field;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.Input,(0,a.Z)({variant:"standard",label:"Address"},r)),(0,j.jsx)(c.Bc,{name:"address",component:"div",className:"text-red-500"})]})}})}),(0,j.jsx)("div",{className:"m-3",children:(0,j.jsx)(c.gN,{name:"distance",children:function(e){var r=e.field;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.Input,(0,a.Z)({variant:"standard",label:"Distance"},r)),(0,j.jsx)(c.Bc,{name:"distance",component:"div",className:"text-red-500"})]})}})}),(0,j.jsx)("div",{className:"m-3",children:(0,j.jsx)(c.gN,{name:"desc",children:function(e){var r=e.field;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.Input,(0,a.Z)({variant:"standard",label:"Description"},r)),(0,j.jsx)(c.Bc,{name:"desc",component:"div",className:"text-red-500"})]})}})}),(0,j.jsx)("div",{className:"m-3",children:(0,j.jsx)(c.gN,{name:"cheapestPrice",children:function(e){var r=e.field;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.Input,(0,a.Z)({variant:"standard",label:"Cheapest Price"},r)),(0,j.jsx)(c.Bc,{name:"cheapestPrice",component:"div",className:"text-red-500"})]})}})}),(0,j.jsx)("div",{className:"m-3",children:(0,j.jsx)(c.gN,{name:"photos",children:function(e){var r=e.field,n=e.form;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("input",(0,a.Z)((0,a.Z)({type:"text",label:"Photos"},r),{},{onChange:function(e){n.setFieldValue("photos",e.target.value)}})),(0,j.jsx)(c.Bc,{name:"photos",component:"div",className:"text-red-500"})]})}})}),(0,j.jsx)("div",{className:"p-2",children:(0,j.jsx)(d.Button,{color:"blue",type:"submit",children:"Add Hotel"})})]})})]})})]})]})})})})}}}]);
//# sourceMappingURL=202.392dfb46.chunk.js.map