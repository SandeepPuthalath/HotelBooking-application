"use strict";(self.webpackChunkclient2=self.webpackChunkclient2||[]).push([[253],{55253:function(e,s,l){l.r(s);var r=l(1413),n=l(29439),a=l(72791),t=l(39126),i=l(91608),o=l(23197),d=l(59434),c=l(63034),u=l(36255),v=l(78820),f=l(80184),m=function(e){e.socket,e._id;var s=e.name;return(0,f.jsxs)("div",{className:" flex items-center px-2 py-1 border border-gray-50 shadow-sm hover:bg-gray-200",children:[(0,f.jsx)("div",{className:"px-2 py-2",children:(0,f.jsx)(t._Tb,{className:"text-gray-700",size:38})}),(0,f.jsxs)("div",{className:"w-full flex flex-col",children:[(0,f.jsx)("div",{className:"2-full flex justify-between items-center-center",children:(0,f.jsx)("h3",{className:"text-gray-900 font-semibold text-md",children:s})}),(0,f.jsx)("p",{className:"text-xs",children:"This is the last message"})]})]})},x=function(e){e.socket;var s,l,r=e.message,n=(0,d.v9)((function(e){var s,l;return null===(s=e.user)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.applicantId}));return(0,f.jsx)("div",{className:"w-full flex ".concat((null===r||void 0===r?void 0:r.sender)===n?"justify-start":"justify-end"),children:(0,f.jsxs)("div",{className:"".concat((null===r||void 0===r?void 0:r.sender)===n?"bg-gray-900 text-gray-50":"bg-gray-50 text-gray-900"," px-5 py-2 rounded-md"),children:[(0,f.jsx)("span",{className:"text-sm font-semibold ".concat((null===r||void 0===r?void 0:r.sender)===n?"text-green-400":" text-blue-400"," capitalize"),children:(null===r||void 0===r?void 0:r.sender)===n?"you":null===r||void 0===r||null===(s=r.user)||void 0===s?void 0:s.firstName.concat(null===r||void 0===r||null===(l=r.user)||void 0===l?void 0:l.lastName)}),(0,f.jsx)("p",{className:"text-sm ",children:null===r||void 0===r?void 0:r.message})]})})};s.default=function(){var e=(0,d.I0)(),s=(0,d.v9)((function(e){var s,l;return null===(s=e.user)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.token})),l=(0,d.v9)((function(e){var s,l;return null===(s=e.user)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.applicantId})),t=(0,d.v9)((function(e){var s;return null===(s=e.hotels)||void 0===s?void 0:s.data})),g=(0,d.v9)((function(e){return e.userChat.messages})),h=a.useState(""),p=(0,n.Z)(h,2),y=p[0],j=p[1],b=a.useState(""),N=(0,n.Z)(b,2),k=N[0],_=N[1],w=a.useRef(null),C=(0,i.io)(o.zo.SERVER_URL,{query:{token:s}});return a.useEffect((function(){e((0,c.Z)())}),[]),a.useEffect((function(){!function(){if(w.current){var e=w.current;e.scrollTop=e.scrollHeight}}()}),[g]),(0,f.jsx)("div",{className:"",children:(0,f.jsxs)("div",{className:"md:grid grid-cols-6",children:[(0,f.jsx)("div",{className:"md:col-span-2 flex flex-col max-h-96 overflow-y-auto",children:t.map((function(s){return(0,f.jsx)("div",{className:"cursor-pointer",onClick:function(){return l=null===s||void 0===s?void 0:s._id,C.emit("join_help_desk",l),C.on("receive_message",(function(s){console.log({data:s}),e((0,u.IC)(s))})),j(l),void e((0,u.t_)(l));var l},children:(0,f.jsx)(m,(0,r.Z)((0,r.Z)({},s),{},{socket:C}))},null===s||void 0===s?void 0:s._id)}))}),(0,f.jsxs)("div",{className:"md:col-span-4 ",children:[(0,f.jsx)("div",{className:"w-full relative",children:y&&(0,f.jsx)("div",{onClick:function(){C.off("join_help_desk"),C.off("receive_message"),j("")},className:"absolute right-0 px-6 py-3 cursor-pointer rounded-full",children:(0,f.jsx)(v.oHP,{className:"text-red-600 shadow-lg border bg-gray-500 border-gray-500 rounded-full p-1",size:30})})}),(0,f.jsx)("div",{ref:w,className:"bg-gray-600 w-full max-h-[21rem] min-h-[21rem] flex flex-col gap-5 overflow-y-auto px-10 py-10",children:y&&g&&g.map((function(e){return(0,f.jsx)(x,{socket:C,message:e},null===e||void 0===e?void 0:e._id)}))}),(0,f.jsxs)("div",{className:"border-t border-gray-200 flex justify-center items-center gap-5 w-full px-5 py-2",children:[(0,f.jsx)("input",{value:k,onChange:function(e){return _(e.target.value)},type:"text",className:"w-full py-2 px-2 bg-transparent border-b-2 border-gray-500 focus::border-none",placeholder:"Type somthing here ...."}),(0,f.jsx)("button",{onClick:function(){if(console.log("sending message"),k){var e={hotelId:y,message:k,sender:l};C.emit("send_message",e),_("")}},className:"bg-gray-900 px-4 py-1 rounded-md text-sm font-bold border-2 border-gray-900 hover:bg-gray-100 hover:text-gray-900 text-gray-50 ",children:"Send"})]})]})]})})}}}]);
//# sourceMappingURL=253.e4d47307.chunk.js.map