"use strict";(self.webpackChunkclient2=self.webpackChunkclient2||[]).push([[323],{82323:function(e,n,r){r.r(n),r.d(n,{DefaultSpinner:function(){return w}});var i=r(1413),l=r(74165),t=r(15861),a=r(29439),o=r(72791),s=r(7692),d=r(16856),u=r(59434),c=r(57689),f=r(27319),v=r(6007),m=r(21830),h=r.n(m),p=r(53724),x=r(79139),g=r(55705),b=r(8007),j=r(35372),y=r(80184);function w(){return(0,y.jsx)("div",{className:"absolute flex justify-center inset-0 bg-gray-400 bg-opacity-50  backdrop-filter backdrop-blur-0 items-center w-full h-full",children:(0,y.jsx)(x.Spinner,{className:"h-10 w-10"})})}var N=b.Ry().shape({title:b.Z_().required("please fill this field"),desc:b.Z_().required("please fill this field")}),C=b.Ry().shape({changedImage:b.nK().required("Please choose an image").test("FILE_TYPE","Invalid file type! please choose jpg",(function(e){return e&&["image/jpeg","image/png"].includes(e.type)}))});n.default=function(){var e=(0,u.I0)(),n=(0,c.s0)(),r=(0,c.UO)().bannerId,m=(0,u.v9)((function(e){var n;return null===(n=e.adminBanner)||void 0===n?void 0:n.loading})),b=(0,u.v9)((function(e){return e.uploadImg.loading})),I=(0,u.v9)((function(e){var n;return null===(n=e.adminBanner)||void 0===n?void 0:n.banner})),k=o.useRef(),B=o.useState(!1),S=(0,a.Z)(B,2),Z=S[0],E=S[1],F=(0,g.TA)({initialValues:{title:"",desc:""},validationSchema:N,onSubmit:function(n){var r={bannerId:null===I||void 0===I?void 0:I._id,updates:n};e((0,v.LV)(r)).then((function(e){var n,r;return null!==e&&void 0!==e&&e.errors?h().fire("Error!",null===e||void 0===e||null===(r=e.errors)||void 0===r?void 0:r.message,"error"):(E(!1),h().fire("Success!",null===(n=e.payload)||void 0===n?void 0:n.message,"success"))}))}}),_=(0,g.TA)({initialValues:{changedImage:""},validationSchema:C,onSubmit:function(e){R(null===e||void 0===e?void 0:e.changedImage)}});o.useEffect((function(){e((0,v.cB)(r)).then((function(e){var n,r=null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.banner;F.setFieldValue("title",null===r||void 0===r?void 0:r.title),F.setFieldValue("desc",null===r||void 0===r?void 0:r.desc)}))}),[]);var R=function(n){h().fire({title:"Do you wish to Confirm?",text:"You won't be able to revert this!",width:"28rem",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm!"}).then((function(r){r.isConfirmed&&e((0,p.OR)(n)).then((function(r){var i,l;if(null!==r&&void 0!==r&&r.errors)return h().fire("Error!",null===r||void 0===r||null===(l=r.errors)||void 0===l?void 0:l.message,"error");if(!n)return h().fire("Error","Please change the existing image","error");var t=null===(i=r.payload)||void 0===i?void 0:i.secure_url,a={bannerId:null===I||void 0===I?void 0:I._id,cloudinaryImgUrl:t};e((0,v.r_)(a)).then((function(e){var n,r;return null!==e&&void 0!==e&&e.errors?h().fire("Error!",null===e||void 0===e||null===(r=e.errors)||void 0===r?void 0:r.message,"error"):(_.resetForm(),h().fire("Success!",null===(n=e.payload)||void 0===n?void 0:n.message,"success").then((function(){return window.location.reload()})))}))}))}))};return m?(0,y.jsx)(f.Z,{}):(0,y.jsx)("div",{className:"w-full min-h-screen py-5 px-5",children:(0,y.jsxs)("div",{className:"relative min-h-[28rem] flex flex-col bg-gray-50 shadow-lg rounded-md border-2",children:[(0,y.jsx)("div",{className:"flex justify-center items-center",children:(0,y.jsx)("h3",{className:"text-xl my-5 uppercase font-semibold",children:"Update banner"})}),(0,y.jsx)("div",{onClick:function(){return n(-1)},className:"absolute top-5 left-5 text-blue-700",children:(0,y.jsx)(s.YiX,{size:25})}),(0,y.jsx)("div",{onClick:function(){console.log("delete"),h().fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,width:"28rem",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(r){r.isConfirmed&&e((0,v.$x)(null===I||void 0===I?void 0:I._id)).then(function(){var e=(0,t.Z)((0,l.Z)().mark((function e(r){var i,t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r||void 0===r||!r.errors){e.next=2;break}return e.abrupt("return",h().fire("Error!",null===r||void 0===r||null===(t=r.errors)||void 0===t?void 0:t.message,"error"));case 2:return e.abrupt("return",h().fire("Success!",null===(i=r.payload)||void 0===i?void 0:i.message,"success").then((function(e){n(-1)})));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}))},className:"absolute top-5 right-5 text-blue-700",children:(0,y.jsx)(d.ZkW,{color:"red",size:25})}),(0,y.jsxs)("div",{className:"grid md:grid-cols-2",children:[(0,y.jsx)("div",{className:"md:col-span-1",children:(0,y.jsxs)("div",{className:"w-full px-2 py-2",children:[(0,y.jsxs)("div",{className:"relative",children:[b&&(0,y.jsx)(w,{}),_.errors.changedImage&&(0,y.jsx)("span",{className:"text-red-600",children:_.errors.changedImage}),_.values.changedImage?(0,y.jsx)(j.Z,{file:_.values.changedImage}):(0,y.jsx)("img",{src:null===I||void 0===I?void 0:I.cloudinaryImgUrl,className:"border-2 rounded-md",alt:""})]}),(0,y.jsxs)("div",{className:"flex gap-2 py-2",children:[(0,y.jsx)("input",{ref:k,onChange:function(){var e=k.current.files[0];_.setFieldValue("changedImage",e)},type:"file",hidden:!0}),(0,y.jsx)("button",{onClick:function(){k.current.click()},className:"font-bold uppercase bg-gray-200 border-2 border-gray-200 shadow-md rounded-sm text-blue-900 px-4 py-2",children:"choose"}),(0,y.jsx)("button",{onClick:_.handleSubmit,className:" bg-gray-900 font-bold uppercase border-1 shadow-md rounded-sm text-gray-100 px-4 py-2",children:"upload"})]})]})}),(0,y.jsx)("div",{className:"md:col-span-1",children:(0,y.jsx)("form",{onSubmit:F.handleSubmit,children:(0,y.jsxs)("div",{className:"flex flex-col px-10 py-10 gap-5",children:[(0,y.jsx)(x.Input,(0,i.Z)((0,i.Z)({disabled:!Z},F.getFieldProps("title")),{},{variant:"standard",label:"Banner title"})),(0,y.jsx)(x.Textarea,(0,i.Z)((0,i.Z)({disabled:!Z},F.getFieldProps("desc")),{},{variant:"standard",label:"Banner description"})),(0,y.jsxs)("div",{className:"mt-5 flex justify-end gap-3",children:[(0,y.jsx)(x.Button,{onClick:function(){return E((function(e){return!e}))},variant:"text",color:Z?"red":"blue",children:Z?"cancel":"edit"}),(0,y.jsx)(x.Button,{type:"submit",children:"Save"})]})]})})})]})]})})}},35372:function(e,n,r){r.d(n,{Z:function(){return a}});var i=r(29439),l=r(72791),t=r(80184);function a(e){var n=e.file,r=l.useState({}),a=(0,i.Z)(r,2),o=a[0],s=a[1];if(n){var d=new FileReader;d.readAsDataURL(n),d.onload=function(){s(d.result)}}return(0,t.jsx)("img",{src:o,alt:"preview"})}}}]);
//# sourceMappingURL=323.bf538998.chunk.js.map