"use strict";(self.webpackChunkclient2=self.webpackChunkclient2||[]).push([[607,319],{27319:function(e,r,s){var t=s(79139),l=(s(72791),s(80184));r.Z=function(){return(0,l.jsxs)("div",{className:"bg-black bg-opacity-50  backdrop-filter backdrop-blur-sm absolute z-50 top-0 left-0 w-full h-full flex justify-center items-center",children:[(0,l.jsx)(t.Spinner,{className:"h-16 w-16 text-blue-500/10"}),";"]})}},91607:function(e,r,s){s.r(r),s.d(r,{default:function(){return g}});var t=s(1413),l=s(74165),n=s(15861),a=s(29439),i=s(72791),u=s(55705),o=s(8007),c=s(59434),d=s(49274),m=s(22171),b=s(9085),f=s(80184),p=function(e){var r=e.isOpen,s=e.onClose,a=e.name,i=e.applicantId,d=(0,c.I0)(),p=o.Ry().shape({GSTNumber:o.Z_().required("GST Number is required").matches(/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}[Z]{1}[A-Z\d]{1}$/,"Invalid GST Number")}),h=(0,u.TA)({initialValues:{gstNumber:""},validationSchema:p,onSubmit:function(){var e=(0,n.Z)((0,l.Z)().mark((function e(r){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.name=a,r.applicantId=i,e.next=4,d((0,m.pJ)(r)).then((function(e){if(console.log(e),e.errors)return b.Am.error("something went wrong");b.Am.success("Application has been successfully submited"),s()}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()});return r?(0,f.jsx)("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur",children:(0,f.jsxs)("div",{className:"bg-white w-96 rounded shadow-md p-6",children:[(0,f.jsx)("h2",{className:"text-xl mb-4",children:"GST Number"}),(0,f.jsxs)("form",{onSubmit:h.handleSubmit,children:[(0,f.jsx)("input",(0,t.Z)({type:"text",className:"w-full p-2 mb-4 border rounded",placeholder:"GST Number"},h.getFieldProps("GSTNumber"))),h.touched.gstNumber&&h.errors.gstNumber&&(0,f.jsx)("div",{className:"text-red-500 mb-2",children:h.errors.gstNumber}),(0,f.jsxs)("div",{className:"flex justify-end",children:[(0,f.jsx)("button",{type:"button",className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded",onClick:s,children:"Cancel"}),(0,f.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Submit"})]})]})]})}):null},h=s(40071),x=s(53724),N=s(52551),v=s(79139),j=s(27319),g=function(){var e=(0,c.I0)(),r=(0,c.v9)((function(e){var r;return null===(r=e.user.data)||void 0===r?void 0:r.applicantId})),s=(0,c.v9)((function(e){return e.userProfile.data})),m=(0,c.v9)((function(e){return e.uploadImg.loading})),b=(0,c.v9)((function(e){var r;return null===(r=e.userProfile)||void 0===r?void 0:r.loading})),g=(0,i.useState)(null),y=(0,a.Z)(g,2),w=y[0],Z=y[1],S=(0,i.useState)(!1),k=(0,a.Z)(S,2),I=k[0],q=k[1],A=i.useState(!1),P=(0,a.Z)(A,2),C=P[0];P[1];(0,i.useEffect)((function(){var t=function(){var t=(0,n.Z)((0,l.Z)().mark((function t(){return(0,l.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e((0,d.e)(r)),Z(null===s||void 0===s?void 0:s.pic),F.setValues(s)}catch(l){console.error("Error fetching profile data:",l)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var T=o.Ry().shape({firstName:o.Z_().required("First Name is required"),lastName:o.Z_().required("Last Name is required"),email:o.Z_().email("Invalid email").required("Email is required"),phoneNumber:o.Z_().required("Phone Number is required")}),F=(0,u.TA)({initialValues:{firstName:"",lastName:"",email:"",phoneNumber:""},validationSchema:T,onSubmit:function(s){var t={firstName:s.firstName,lastName:s.lastName,email:s.email,phoneNumber:s.phoneNumber};e((0,d.L)({userId:r,updates:t}))}});return b?(0,f.jsx)(j.Z,{}):(0,f.jsxs)("div",{className:"max-w-xl mx-auto p-6",children:[(0,f.jsxs)("section",{className:"mb-8",children:[(0,f.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,f.jsxs)("div",{className:"w-48 h-48 relative",children:[(0,f.jsx)("div",{className:"w-full h-full relative bg-gray-300 rounded-full flex items-center justify-center overflow-hidden",style:{backgroundImage:"url(".concat(w||(null===s||void 0===s?void 0:s.pic)||"/defaults/blank-profile.png",")"),backgroundSize:"cover",backgroundPosition:"center"},children:m&&(0,f.jsx)("div",{className:"absolute bg-opacity-10 backdrop-filter backdrop-blur-sm w-full h-full flex justify-center items-center",children:(0,f.jsx)(v.Spinner,{className:"h-8 w-8"})})}),(0,f.jsx)("label",{htmlFor:"avatarUpload",className:"absolute bottom-0 right-0 flex items-center justify-center w-8 h-8 bg-blue-500 text-white rounded-full hover:bg-blue-700 focus:outline-none cursor-pointer",children:(0,f.jsx)(h.xcL,{size:16})}),(0,f.jsx)("input",{type:"file",accept:"image/*",className:"hidden",id:"avatarUpload",onChange:function(s){Z(URL.createObjectURL(s.target.files[0])),e((0,x.OR)(s.target.files[0])).then((function(s){var t=s.payload.secure_url;e((0,N.n)({userId:r,secure_url:t}))}))}})]})}),(0,f.jsxs)("div",{className:"flex justify-center",children:[(0,f.jsxs)("div",{className:"text-gray-600",children:["Account Type: ",null===s||void 0===s?void 0:s.role]}),(0,f.jsx)("button",{onClick:function(){return q(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 focus:outline-none ml-4",children:"Change Role"})]})]}),(0,f.jsx)("section",{className:"mb-8",children:(0,f.jsxs)("form",{onSubmit:F.handleSubmit,children:[(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("input",(0,t.Z)((0,t.Z)({type:"text",className:"w-full p-2 border rounded focus:outline-none focus:border-blue-500",placeholder:"First Name"},F.getFieldProps("firstName")),{},{disabled:C})),F.touched.firstName&&F.errors.firstName&&(0,f.jsx)("div",{className:"text-red-500 mt-1",children:F.errors.firstName})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("input",(0,t.Z)((0,t.Z)({type:"text",className:"w-full p-2 border rounded focus:outline-none focus:border-blue-500",placeholder:"Last Name"},F.getFieldProps("lastName")),{},{disabled:C})),F.touched.lastName&&F.errors.lastName&&(0,f.jsx)("div",{className:"text-red-500 mt-1",children:F.errors.lastName})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("input",(0,t.Z)((0,t.Z)({type:"email",className:"w-full p-2 border rounded focus:outline-none focus:border-blue-500",placeholder:"Email"},F.getFieldProps("email")),{},{disabled:C})),F.touched.email&&F.errors.email&&(0,f.jsx)("div",{className:"text-red-500 mt-1",children:F.errors.email})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("input",(0,t.Z)((0,t.Z)({type:"tel",className:"w-full p-2 border rounded focus:outline-none focus:border-blue-500",placeholder:"Phone Number"},F.getFieldProps("phoneNumber")),{},{disabled:C})),F.touched.phoneNumber&&F.errors.phoneNumber&&(0,f.jsx)("div",{className:"text-red-500 mt-1",children:F.errors.phoneNumber})]}),(0,f.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 focus:outline-none",children:"Save"})]})}),(0,f.jsx)(p,{isOpen:I,onClose:function(){return q(!1)},name:null===s||void 0===s?void 0:s.firstName,applicantId:r})]})}}}]);
//# sourceMappingURL=607.f9f4a9e9.chunk.js.map