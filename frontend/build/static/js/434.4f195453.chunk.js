"use strict";(self.webpackChunkclient2=self.webpackChunkclient2||[]).push([[434],{33434:function(e,r,s){s.r(r),s.d(r,{default:function(){return y}});var t=s(1413),i=s(74165),l=s(15861),n=s(29439),o=s(72791),a=s(55705),c=s(8007),d=s(59434),u=s(49274),m=s(22171),h=s(9085),f=s(80184),x=function(e){var r=e.isOpen,s=e.onClose,n=e.name,o=e.applicantId,u=(0,d.I0)(),x=c.Ry().shape({GSTNumber:c.Z_().required("GST Number is required").matches(/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}[Z]{1}[A-Z\d]{1}$/,"Invalid GST Number")}),b=(0,a.TA)({initialValues:{gstNumber:""},validationSchema:x,onSubmit:function(){var e=(0,l.Z)((0,i.Z)().mark((function e(r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.name=n,r.applicantId=o,e.next=4,u((0,m.pJ)(r)).then((function(e){if(console.log(e),e.errors)return h.Am.error("something went wrong");h.Am.success("Application has been successfully submited"),s()}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()});return r?(0,f.jsx)("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur",children:(0,f.jsxs)("div",{className:"bg-white w-96 rounded shadow-md p-6",children:[(0,f.jsx)("h2",{className:"text-xl mb-4",children:"GST Number"}),(0,f.jsxs)("form",{onSubmit:b.handleSubmit,children:[(0,f.jsx)("input",(0,t.Z)({type:"text",className:"w-full p-2 mb-4 border rounded",placeholder:"GST Number"},b.getFieldProps("GSTNumber"))),b.touched.gstNumber&&b.errors.gstNumber&&(0,f.jsx)("div",{className:"text-red-500 mb-2",children:b.errors.gstNumber}),(0,f.jsxs)("div",{className:"flex justify-end",children:[(0,f.jsx)("button",{type:"button",className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded",onClick:s,children:"Cancel"}),(0,f.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Submit"})]})]})]})}):null},b=s(88099),p=function(){return(0,f.jsxs)("div",{className:"max-w-xl mx-auto p-6",children:[(0,f.jsxs)("section",{className:"mb-8",children:[(0,f.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,f.jsx)(b.ZP,{speed:2,width:250,height:250,viewBox:"0 0 250 250",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:(0,f.jsx)("circle",{cx:"125",cy:"125",r:"125"})})}),(0,f.jsx)("div",{className:"flex justify-center",children:(0,f.jsx)(b.ZP,{speed:2,width:150,height:20,viewBox:"0 0 150 20",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:(0,f.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"150",height:"20"})})})]}),(0,f.jsx)("section",{className:"mb-8",children:(0,f.jsxs)("form",{children:[(0,f.jsx)("div",{className:"mb-4",children:(0,f.jsx)(b.ZP,{speed:2,width:300,height:20,viewBox:"0 0 300 20",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:(0,f.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"300",height:"20"})})}),(0,f.jsx)("div",{className:"mb-4",children:(0,f.jsx)(b.ZP,{speed:2,width:300,height:20,viewBox:"0 0 300 20",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:(0,f.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"300",height:"20"})})}),(0,f.jsx)("div",{className:"mb-4",children:(0,f.jsx)(b.ZP,{speed:2,width:300,height:20,viewBox:"0 0 300 20",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:(0,f.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"300",height:"20"})})}),(0,f.jsx)("div",{className:"mb-4",children:(0,f.jsx)(b.ZP,{speed:2,width:300,height:20,viewBox:"0 0 300 20",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:(0,f.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"300",height:"20"})})}),(0,f.jsx)(b.ZP,{speed:2,width:100,height:40,viewBox:"0 0 100 40",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:(0,f.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"100",height:"40"})})]})})]})},N=s(40071),v=s(53724),j=s(52551),g=s(79139),y=function(){var e,r,s,m,h=(0,d.v9)((function(e){return e})),b=null===(e=h.userProfile)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.firstName,y=null===h||void 0===h||null===(s=h.user)||void 0===s||null===(m=s.data)||void 0===m?void 0:m.applicantId,w=(0,d.v9)((function(e){return e.uploadImg.loading})),Z=((0,d.v9)((function(e){var r;return null===(r=e.userProfile)||void 0===r?void 0:r.loading})),(0,o.useState)(null)),k=(0,n.Z)(Z,2),C=k[0],S=k[1],P=(0,o.useState)(!1),I=(0,n.Z)(P,2),T=I[0],q=I[1],A=(0,o.useState)(null),F=(0,n.Z)(A,2),B=F[0],_=F[1],G=(0,d.I0)();(0,o.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var r,s,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G((0,u.e)(y));case 3:r=e.sent,s=r.payload,t={firstName:null===s||void 0===s?void 0:s.firstName,lastName:null===s||void 0===s?void 0:s.lastName,email:null===s||void 0===s?void 0:s.email,phoneNumber:null===s||void 0===s?void 0:s.phoneNumber,accountType:null===s||void 0===s?void 0:s.role},console.log(t),S(null===s||void 0===s?void 0:s.pic),_(t),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching profile data:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var L=c.Ry().shape({firstName:c.Z_().required("First Name is required"),lastName:c.Z_().required("Last Name is required"),email:c.Z_().email("Invalid email").required("Email is required"),phoneNumber:c.Z_().required("Phone Number is required")}),R=(0,a.TA)({initialValues:{firstName:"",lastName:"",email:"",phoneNumber:""},validationSchema:L,onSubmit:function(e){console.log(e);var r={firstName:e.firstName,lastName:e.lastName,email:e.email,phoneNumber:e.phoneNumber};G((0,u.L)({userId:y,updates:r}))}});return(0,o.useEffect)((function(){B&&R.setValues(B)}),[B]),B?(0,f.jsxs)("div",{className:"max-w-xl mx-auto p-6",children:[(0,f.jsxs)("section",{className:"mb-8",children:[(0,f.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,f.jsxs)("div",{className:"w-48 h-48 relative",children:[(0,f.jsx)("div",{className:"w-full h-full relative bg-gray-300 rounded-full flex items-center justify-center overflow-hidden",style:{backgroundImage:"url(".concat(C||(null===B||void 0===B?void 0:B.pic)||"/defaults/blank-profile.png",")"),backgroundSize:"cover",backgroundPosition:"center"},children:w&&(0,f.jsx)("div",{className:"absolute bg-opacity-10 backdrop-filter backdrop-blur-sm w-full h-full flex justify-center items-center",children:(0,f.jsx)(g.Spinner,{className:"h-8 w-8"})})}),(0,f.jsx)("label",{htmlFor:"avatarUpload",className:"absolute bottom-0 right-0 flex items-center justify-center w-8 h-8 bg-blue-500 text-white rounded-full hover:bg-blue-700 focus:outline-none cursor-pointer",children:(0,f.jsx)(N.xcL,{size:16})}),(0,f.jsx)("input",{type:"file",accept:"image/*",className:"hidden",id:"avatarUpload",onChange:function(e){S(URL.createObjectURL(e.target.files[0])),G((0,v.OR)(e.target.files[0])).then((function(e){var r=e.payload.secure_url;G((0,j.n)({userId:y,secure_url:r}))}))}})]})}),(0,f.jsxs)("div",{className:"flex justify-center",children:[(0,f.jsxs)("div",{className:"text-gray-600",children:["Account Type: ",B.accountType]}),(0,f.jsx)("button",{onClick:function(){return q(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 focus:outline-none ml-4",children:"Change Role"})]})]}),(0,f.jsx)("section",{className:"mb-8",children:(0,f.jsxs)("form",{onSubmit:R.handleSubmit,children:[(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("input",(0,t.Z)({type:"text",className:"w-full p-2 border rounded focus:outline-none focus:border-blue-500",placeholder:"First Name"},R.getFieldProps("firstName"))),R.touched.firstName&&R.errors.firstName&&(0,f.jsx)("div",{className:"text-red-500 mt-1",children:R.errors.firstName})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("input",(0,t.Z)({type:"text",className:"w-full p-2 border rounded focus:outline-none focus:border-blue-500",placeholder:"Last Name"},R.getFieldProps("lastName"))),R.touched.lastName&&R.errors.lastName&&(0,f.jsx)("div",{className:"text-red-500 mt-1",children:R.errors.lastName})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("input",(0,t.Z)({type:"email",className:"w-full p-2 border rounded focus:outline-none focus:border-blue-500",placeholder:"Email"},R.getFieldProps("email"))),R.touched.email&&R.errors.email&&(0,f.jsx)("div",{className:"text-red-500 mt-1",children:R.errors.email})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("input",(0,t.Z)({type:"tel",className:"w-full p-2 border rounded focus:outline-none focus:border-blue-500",placeholder:"Phone Number"},R.getFieldProps("phoneNumber"))),R.touched.phoneNumber&&R.errors.phoneNumber&&(0,f.jsx)("div",{className:"text-red-500 mt-1",children:R.errors.phoneNumber})]}),(0,f.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 focus:outline-none",children:"Save"})]})}),(0,f.jsx)(x,{isOpen:T,onClose:function(){return q(!1)},name:b,applicantId:y})]}):(0,f.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,f.jsx)(p,{})})}}}]);
//# sourceMappingURL=434.4f195453.chunk.js.map