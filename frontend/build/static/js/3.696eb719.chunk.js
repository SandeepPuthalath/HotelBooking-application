"use strict";(self.webpackChunkclient2=self.webpackChunkclient2||[]).push([[3],{57003:function(e,a,t){t.r(a),t.d(a,{default:function(){return I}});var n=t(1413),r=t(74165),s=t(15861),l=t(29439),o=t(72791),i=t(67156),c=t(79139),d=t(59434),u=t(27319),m=t(51476),x=t(23197),p=t(56355),h=t(53724),f=t(34279),g=t(80184);function j(e){var a=e.open,t=e.setOpen,n=e.photo,r=(e._id,e.name),s=(0,d.I0)(),i=(0,d.v9)((function(e){return e.uploadImg.loading})),m=o.useState(!1),j=(0,l.Z)(m,2),v=(j[0],j[1]),b=o.useState(null),y=(0,l.Z)(b,2),N=y[0],Z=y[1],w=o.useState(""),I=(0,l.Z)(w,2),B=I[0],z=I[1],C=o.useRef(null);return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(c.Dialog,{className:"relative",size:"lg",open:a,handler:function(){return t((function(e){return!e}))},children:[i&&(0,g.jsx)(u.Z,{}),(0,g.jsxs)(c.DialogHeader,{className:"justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)(c.Avatar,{size:"sm",variant:"circular",alt:"tania andrew",src:n?"https://res.cloudinary.com/".concat(x.Zm,"/image/upload/v1689876154/BookIt_uploades/").concat(n,".jpg"):"/defaults/default-image.jpg"}),(0,g.jsx)("div",{className:"-mt-px flex flex-col",children:(0,g.jsx)(c.Typography,{variant:"small",color:"blue-gray",className:"font-medium",children:r})})]}),(0,g.jsx)("div",{className:"flex items-center gap-2"})]}),(0,g.jsx)(c.DialogBody,{divider:!0,className:"p-0",children:(0,g.jsx)("img",{alt:"nature",className:"h-[28rem] w-full object-cover object-center",src:B||(n?"https://res.cloudinary.com/".concat(x.Zm,"/image/upload/v1689876154/BookIt_uploades/").concat(n,".jpg"):"/defaults/default-image.jpg")})}),(0,g.jsxs)(c.DialogFooter,{className:"justify-between",children:[(0,g.jsx)(c.Button,{size:"sm",variant:"outlined",color:"blue-gray",className:"flex items-center gap-3",onClick:function(){C.current.click(),v((function(e){return!e}))},children:"Choose"}),(0,g.jsxs)(c.Button,{size:"sm",variant:"outlined",color:"blue-gray",className:"flex items-center gap-3",onClick:function(){if(!N)return t(!1);s((0,h.OR)(N)).then((function(e){var a;console.log(e);var t=(0,f.separatePhotoId)(null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.secure_url);console.log(t)}))},children:[(0,g.jsx)(p.DUB,{size:20}),"Upload"]}),(0,g.jsx)("input",{onChange:function(e){var a=e.target.files[0];Z(a),z(URL.createObjectURL(a))},className:"hidden",ref:C,name:"image",type:"file"})]})]})})}var v=["Name","Created at","Updated at","Actions"];function b(){var e=(0,d.I0)(),a=(0,d.v9)((function(e){return e.allDestinations.loading})),t=(0,d.v9)((function(e){return e.allDestinations.data})),r=((0,d.v9)((function(e){return e.allDestinations.error})),o.useState(!1)),s=(0,l.Z)(r,2),p=s[0],h=s[1],f=o.useState(null),b=(0,l.Z)(f,2),y=b[0],N=b[1];return o.useEffect((function(){e((0,m.cH)())}),[]),a?(0,g.jsx)(u.Z,{}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(c.Card,{className:"rounded-none shadow-none",children:[(0,g.jsx)(c.CardBody,{className:"px-0",children:(0,g.jsxs)("table",{className:"w-full min-w-max table-auto text-left",children:[(0,g.jsx)("thead",{children:(0,g.jsx)("tr",{children:v.map((function(e){return(0,g.jsx)("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-4",children:(0,g.jsx)(c.Typography,{variant:"small",color:"blue-gray",className:"font-normal leading-none opacity-70",children:e})},e)}))})}),(0,g.jsx)("tbody",{children:t.map((function(e,a){var n=e._id,r=e.name,s=e.photo,l=e.createdAt,o=e.updatedAt,d=a===t.length-1?"p-4":"p-4 border-b border-blue-gray-50";return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:d,children:(0,g.jsxs)("div",{className:"flex items-center gap-3  cursor-pointer",onClick:function(){N({_id:n,name:r,photo:s}),h(!0)},children:[(0,g.jsx)(c.Avatar,{src:s?"https://res.cloudinary.com/".concat(x.Zm,"/image/upload/v1689876154/BookIt_uploades/").concat(s,".jpg"):"/defaults/default-image-80.png",alt:r,size:"md",className:"border border-blue-gray-50 bg-blue-gray-50/50 object-cover p-1  hover:border-gray-900"}),(0,g.jsx)(c.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:r})]})}),(0,g.jsx)("td",{className:d,children:(0,g.jsx)(c.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:l.split("T")[0]})}),(0,g.jsx)("td",{className:d,children:(0,g.jsx)(c.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:o.split("T")[0]})}),(0,g.jsx)("td",{className:d,children:(0,g.jsx)(c.Tooltip,{content:"Edit User",children:(0,g.jsx)(c.IconButton,{variant:"text",color:"blue-gray",children:(0,g.jsx)(i.Z,{className:"h-4 w-4"})})})})]},a)}))})]})}),(0,g.jsxs)(c.CardFooter,{className:"flex items-center justify-between border-t border-blue-gray-50 p-4",children:[(0,g.jsx)(c.Button,{variant:"outlined",color:"blue-gray",size:"sm",children:"Previous"}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(c.IconButton,{variant:"outlined",color:"blue-gray",size:"sm",children:"1"}),(0,g.jsx)(c.IconButton,{variant:"text",color:"blue-gray",size:"sm",children:"2"}),(0,g.jsx)(c.IconButton,{variant:"text",color:"blue-gray",size:"sm",children:"3"}),(0,g.jsx)(c.IconButton,{variant:"text",color:"blue-gray",size:"sm",children:"..."}),(0,g.jsx)(c.IconButton,{variant:"text",color:"blue-gray",size:"sm",children:"8"}),(0,g.jsx)(c.IconButton,{variant:"text",color:"blue-gray",size:"sm",children:"9"}),(0,g.jsx)(c.IconButton,{variant:"text",color:"blue-gray",size:"sm",children:"10"})]}),(0,g.jsx)(c.Button,{variant:"outlined",color:"blue-gray",size:"sm",children:"Next"})]})]}),(0,g.jsx)(j,(0,n.Z)({open:p,setOpen:h},y))]})}var y=t(8007),N=t(55705),Z=t(49172),w=y.Ry().shape({name:y.Z_().required("Pleace enter a name"),photo:y.Z_().required("Choose an image")}),I=function(){var e=(0,d.I0)(),a=(0,d.v9)((function(e){return e.uploadImg.loading})),t=o.useState(""),i=(0,l.Z)(t,2),m=i[0],x=i[1],p=o.useState(null),j=(0,l.Z)(p,2),v=j[0],y=j[1],I=o.useState(!1),B=(0,l.Z)(I,2),z=B[0],C=B[1];o.useEffect((function(){return e((0,h.Fi)()),function(){return e((0,Z.oA)())}}),[e]);var k=(0,N.TA)({initialValues:{name:"",photo:""},validationSchema:w,onSubmit:function(){var a=(0,s.Z)((0,r.Z)().mark((function a(t){return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e((0,h.OR)(v)).then(function(){var a=(0,s.Z)((0,r.Z)().mark((function a(n){var s;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log(n),t.photo=(0,f.separatePhotoId)(null===n||void 0===n||null===(s=n.payload)||void 0===s?void 0:s.secure_url),e((0,Z.sA)(t));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}),S=function(){C((function(e){return!e}))};return(0,g.jsx)("div",{className:"px-1 py-1",children:(0,g.jsxs)("div",{className:"flex flex-col bg-white",children:[(0,g.jsx)("div",{className:"flex justify-center items-center py-2",children:(0,g.jsx)("h3",{className:"font-bold uppercase text-2xl text-gray-900",children:"Destinations"})}),(0,g.jsxs)("div",{className:"grid gap-2",children:[z?(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("div",{className:"grid md:grid-cols-2 ",children:[(0,g.jsx)("div",{className:"md:col-span-1   border-gray-200 flex justify-center items-center",children:(0,g.jsxs)("figure",{className:"relative px-2 py-2",children:[a&&(0,g.jsx)(u.Z,{}),(0,g.jsx)("img",{loading:"lazy",className:"bg-red-500 md:min-h-[15rem] md:max-h-[15rem] shadow-sm shadow-gray-500  rounded-md object-cover object-center",src:m||"/defaults/default-image.jpg",alt:"destinatiom img"})]})}),(0,g.jsx)("div",{className:"md:col-span-1 px-10 py-10 md:px-5 md:py-5",children:(0,g.jsxs)("div",{className:"flex flex-col gap-5 justify-center items-center",children:[(0,g.jsx)("div",{className:"w-full text-center text-gray-900 text-md font-semibold uppercase",children:"Add banner form"}),(0,g.jsx)(c.Input,(0,n.Z)((0,n.Z)({},k.getFieldProps("name")),{},{error:Boolean(k.errors.name),label:k.errors.name?"Please enter the name":"Enter destination name"})),(0,g.jsx)(c.Input,{onChange:function(e){var a=e.target.files[0];y(a);var t=URL.createObjectURL(a);x(t),k.setFieldValue("photo",t)},error:k.touched.photo&&Boolean(k.errors.photo),label:k.errors.name?"Please choose and image":"Enter destination name",type:"file"}),(0,g.jsxs)("div",{className:"w-full flex justify-end items-center gap-2",children:[(0,g.jsx)("button",{className:"bg-red-50 text-red-700 text-sm font-bold uppercase px-3 py-2 rounded-sm",onClick:S,children:"cancel"}),(0,g.jsx)("button",{onClick:k.handleSubmit,className:"bg-gray-900 text-gray-50 text-sm font-bold uppercase px-3 py-2 rounded-sm",children:"submit"})]})]})})]})}):(0,g.jsx)("div",{className:"flex justify-end items-center px-5",children:(0,g.jsx)("button",{onClick:S,className:"px-3 py-2 bg-blue-700 text-xs text-gray-50 font-semibold uppercase rounded-sm my-1 shadow-md",children:"Add Destination"})}),(0,g.jsx)("div",{className:"px-2",children:(0,g.jsx)(b,{})})]})]})})}},67156:function(e,a,t){var n=t(44925),r=t(72791),s=["title","titleId"];var l=r.forwardRef((function(e,a){var t=e.title,l=e.titleId,o=(0,n.Z)(e,s);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":l},o),t?r.createElement("title",{id:l},t):null,r.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"}))}));a.Z=l}}]);
//# sourceMappingURL=3.696eb719.chunk.js.map