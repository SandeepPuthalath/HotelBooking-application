"use strict";(self.webpackChunkclient2=self.webpackChunkclient2||[]).push([[323],{82323:function(e,r,n){n.r(r),n.d(r,{DefaultSpinner:function(){return w}});var i=n(1413),l=n(74165),t=n(15861),a=n(29439),o=n(72791),s=n(7692),d=n(16856),u=n(59434),c=n(57689),f=n(27319),v=n(6007),m=n(21830),h=n.n(m),p=n(53724),x=n(79139),g=n(55705),b=n(8007),j=n(35372),y=n(80184);function w(){return(0,y.jsx)("div",{className:"absolute flex justify-center inset-0 bg-gray-400 bg-opacity-50  backdrop-filter backdrop-blur-0 items-center w-full h-full",children:(0,y.jsx)(x.Spinner,{className:"h-10 w-10"})})}var N=b.Ry().shape({title:b.Z_().required("please fill this field"),desc:b.Z_().required("please fill this field")}),k=b.Ry().shape({changedImage:b.nK().required("Please choose an image").test("FILE_TYPE","Invalid file type! please choose jpg",(function(e){return e&&["image/jpeg","image/png"].includes(e.type)}))});r.default=function(){var e=(0,u.I0)(),r=(0,c.s0)(),n=(0,c.UO)().bannerId,m=(0,u.v9)((function(e){var r;return null===(r=e.adminBanner)||void 0===r?void 0:r.loading})),b=(0,u.v9)((function(e){return e.uploadImg.loading})),C=(0,u.v9)((function(e){var r;return null===(r=e.adminBanner)||void 0===r?void 0:r.banner})),I=o.useRef(),S=o.useState(!1),Z=(0,a.Z)(S,2),B=Z[0],E=Z[1],F=(0,g.TA)({initialValues:{title:"",desc:""},validationSchema:N,onSubmit:function(r){var n={bannerId:null===C||void 0===C?void 0:C._id,updates:r};e((0,v.LV)(n)).then((function(e){var r,n;return null!==e&&void 0!==e&&e.errors?h().fire("Error!",null===e||void 0===e||null===(n=e.errors)||void 0===n?void 0:n.message,"error"):(E(!1),h().fire("Success!",null===(r=e.payload)||void 0===r?void 0:r.message,"success"))}))}}),_=(0,g.TA)({initialValues:{changedImage:""},validationSchema:k,onSubmit:function(e){R(null===e||void 0===e?void 0:e.changedImage)}});o.useEffect((function(){e((0,v.cB)(n)).then((function(e){var r=(null===e||void 0===e?void 0:e.payload).banner;F.setFieldValue("title",null===r||void 0===r?void 0:r.title),F.setFieldValue("desc",null===r||void 0===r?void 0:r.desc)}))}),[]);var R=function(r){h().fire({title:"Do you wish to Confirm?",text:"You won't be able to revert this!",width:"28rem",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm!"}).then((function(n){n.isConfirmed&&e((0,p.OR)(r)).then((function(n){var i,l;if(null!==n&&void 0!==n&&n.errors)return h().fire("Error!",null===n||void 0===n||null===(l=n.errors)||void 0===l?void 0:l.message,"error");if(!r)return h().fire("Error","Please change the existing image","error");var t=null===(i=n.payload)||void 0===i?void 0:i.secure_url,a={bannerId:null===C||void 0===C?void 0:C._id,cloudinaryImgUrl:t};e((0,v.r_)(a)).then((function(e){var r,n;return null!==e&&void 0!==e&&e.errors?h().fire("Error!",null===e||void 0===e||null===(n=e.errors)||void 0===n?void 0:n.message,"error"):(_.resetForm(),h().fire("Success!",null===(r=e.payload)||void 0===r?void 0:r.message,"success").then((function(){return window.location.reload()})))}))}))}))};return m?(0,y.jsx)(f.Z,{}):(0,y.jsx)("div",{className:"w-full min-h-screen py-5 px-5",children:(0,y.jsxs)("div",{className:"relative min-h-[28rem] flex flex-col bg-gray-50 shadow-lg rounded-md border-2",children:[(0,y.jsx)("div",{className:"flex justify-center items-center",children:(0,y.jsx)("h3",{className:"text-xl my-5 uppercase font-semibold",children:"Update banner"})}),(0,y.jsx)("div",{onClick:function(){return r(-1)},className:"absolute top-5 left-5 text-blue-700",children:(0,y.jsx)(s.YiX,{size:25})}),(0,y.jsx)("div",{onClick:function(){console.log("delete"),h().fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,width:"28rem",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(n){n.isConfirmed&&e((0,v.$x)(null===C||void 0===C?void 0:C._id)).then(function(){var e=(0,t.Z)((0,l.Z)().mark((function e(n){var i,t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n||void 0===n||!n.errors){e.next=2;break}return e.abrupt("return",h().fire("Error!",null===n||void 0===n||null===(t=n.errors)||void 0===t?void 0:t.message,"error"));case 2:return e.abrupt("return",h().fire("Success!",null===(i=n.payload)||void 0===i?void 0:i.message,"success").then((function(e){r(-1)})));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())}))},className:"absolute top-5 right-5 text-blue-700",children:(0,y.jsx)(d.ZkW,{color:"red",size:25})}),(0,y.jsxs)("div",{className:"grid md:grid-cols-2",children:[(0,y.jsx)("div",{className:"md:col-span-1",children:(0,y.jsxs)("div",{className:"w-full px-2 py-2",children:[(0,y.jsxs)("div",{className:"relative",children:[b&&(0,y.jsx)(w,{}),_.errors.changedImage&&(0,y.jsx)("span",{className:"text-red-600",children:_.errors.changedImage}),_.values.changedImage?(0,y.jsx)(j.Z,{file:_.values.changedImage}):(0,y.jsx)("img",{src:null===C||void 0===C?void 0:C.cloudinaryImgUrl,className:"border-2 rounded-md",alt:""})]}),(0,y.jsxs)("div",{className:"flex gap-2 py-2",children:[(0,y.jsx)("input",{ref:I,onChange:function(){var e=I.current.files[0];_.setFieldValue("changedImage",e)},type:"file",hidden:!0}),(0,y.jsx)("button",{onClick:function(){I.current.click()},className:"font-bold uppercase bg-gray-200 border-2 border-gray-200 shadow-md rounded-sm text-blue-900 px-4 py-2",children:"choose"}),(0,y.jsx)("button",{onClick:_.handleSubmit,className:" bg-gray-900 font-bold uppercase border-1 shadow-md rounded-sm text-gray-100 px-4 py-2",children:"upload"})]})]})}),(0,y.jsx)("div",{className:"md:col-span-1",children:(0,y.jsx)("form",{onSubmit:F.handleSubmit,children:(0,y.jsxs)("div",{className:"flex flex-col px-10 py-10 gap-5",children:[(0,y.jsx)(x.Input,(0,i.Z)((0,i.Z)({disabled:!B},F.getFieldProps("title")),{},{variant:"standard",label:"Banner title"})),(0,y.jsx)(x.Textarea,(0,i.Z)((0,i.Z)({disabled:!B},F.getFieldProps("desc")),{},{variant:"standard",label:"Banner description"})),(0,y.jsxs)("div",{className:"mt-5 flex justify-end gap-3",children:[(0,y.jsx)(x.Button,{onClick:function(){return E((function(e){return!e}))},variant:"text",color:B?"red":"blue",children:B?"cancel":"edit"}),(0,y.jsx)(x.Button,{type:"submit",children:"Save"})]})]})})})]})]})})}},27319:function(e,r,n){var i=n(79139),l=(n(72791),n(80184));r.Z=function(){return(0,l.jsxs)("div",{className:"bg-black bg-opacity-50  backdrop-filter backdrop-blur-sm absolute z-50 top-0 left-0 w-full h-full flex justify-center items-center",children:[(0,l.jsx)(i.Spinner,{className:"h-16 w-16 text-blue-500/10"}),";"]})}},35372:function(e,r,n){n.d(r,{Z:function(){return a}});var i=n(29439),l=n(72791),t=n(80184);function a(e){var r=e.file,n=l.useState({}),a=(0,i.Z)(n,2),o=a[0],s=a[1];if(r){var d=new FileReader;d.readAsDataURL(r),d.onload=function(){s(d.result)}}return(0,t.jsx)("img",{src:o,alt:"preview"})}}}]);
//# sourceMappingURL=323.a95c1259.chunk.js.map